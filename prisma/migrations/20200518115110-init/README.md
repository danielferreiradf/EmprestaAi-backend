# Migration `20200518115110-init`

This migration has been generated by danielferreiradf at 5/18/2020, 11:51:10 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."users" (
"address" text  NOT NULL ,"cep" text  NOT NULL ,"city" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"email" text  NOT NULL ,"firstName" text  NOT NULL ,"id" SERIAL,"lastName" text  NOT NULL ,"password" text  NOT NULL ,"phone" text  NOT NULL ,"state" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."products" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"description" text  NOT NULL ,"id" SERIAL,"location" text  NOT NULL ,"name" text  NOT NULL ,"ownerId" integer  NOT NULL ,"price" integer  NOT NULL ,"statusRent" boolean  NOT NULL DEFAULT false,"updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."orders" (
"endOfRent" timestamp(3)  NOT NULL ,"id" SERIAL,"ownerId" integer  NOT NULL ,"productId" integer  NOT NULL ,"renterId" integer  NOT NULL ,"startOfRent" timestamp(3)  NOT NULL ,"totalPrice" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "users.email" ON "public"."users"("email")

ALTER TABLE "public"."products" ADD FOREIGN KEY ("ownerId")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."orders" ADD FOREIGN KEY ("productId")REFERENCES "public"."products"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."orders" ADD FOREIGN KEY ("ownerId")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."orders" ADD FOREIGN KEY ("renterId")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200518115110-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,59 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model User {
+  id             Int       @default(autoincrement()) @id
+  firstName      String
+  lastName       String
+  email          String    @unique
+  address        String
+  city           String
+  state          String
+  cep            String
+  phone          String
+  password       String
+  products       Product[]
+  createdAt      DateTime  @default(now())
+  updatedAt      DateTime  @updatedAt
+  ownedProducts  Order[]   @relation("OwnerOfProduct")
+  rentedProducts Order[]   @relation("RenterOfProduct")
+
+  @@map("users")
+}
+
+model Product {
+  id          Int      @default(autoincrement()) @id
+  name        String
+  price       Int
+  description String
+  location    String
+  owner       User     @relation(fields: [ownerId], references: [id])
+  ownerId     Int
+  statusRent  Boolean  @default(false)
+  createdAt   DateTime @default(now())
+  updatedAt   DateTime @updatedAt
+  Order       Order[]
+
+  @@map("products")
+}
+
+model Order {
+  id          Int      @default(autoincrement()) @id
+  product     Product  @relation(fields: [productId], references: [id])
+  productId   Int
+  owner       User     @relation("OwnerOfProduct", fields: [ownerId], references: [id])
+  ownerId     Int
+  renter      User     @relation("RenterOfProduct", fields: [renterId], references: [id])
+  renterId    Int
+  startOfRent DateTime
+  endOfRent   DateTime
+  totalPrice  Int
+
+  @@map("orders")
+}
```


